{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% block title %}
    Home
{% endblock %}
{% block content %}
    <div class="alert alert-warning alert-dismissible fade show" role="alert" id="error_div">
        <strong>Please select a image</strong>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    {% for message in messages %}
        {% if message.tags == 'error' %}
            <!-- bootstrap alert -->
            <div class="alert alert-warning alert-dismissible fade show" role="alert">
                <strong>{{ message }}</strong>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        {% endif %}
        {% if message.tags == 'success' %}
            <!-- bootstrap alert -->
            <div class="alert alert-success alert-dismissible fade show" role="alert">
                <strong>{{ message }}</strong>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        {% endif %}
    {% endfor %}

    <form method="post" enctype="multipart/form-data" id="file_submit_form">
        {% csrf_token %}
        {{ image_form|crispy }}
        <div class="vr"></div>
        {{ video_form | crispy }}
        <input type="submit" value="Upload Image" name="image_btn" class="btn btn-info">
        <input type="submit" value="Upload Video" name="video_btn" class="btn btn-info">
    </form>
    <script>
        // disable error div
        let error_div = document.getElementById('error_div');
        error_div.style.display = 'none';
        let form = document.getElementById('file_submit_form');
        // form on submit event
        form.onsubmit = function (e) {
            e.preventDefault();
            let image = document.getElementById('id_image');
            // if image contain no file
            if (image.files.length === 0) {
                // disable video upload button
                error_div.style.display = 'block';
            }
        }
    </script>
{% endblock %}